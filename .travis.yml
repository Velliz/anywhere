language: minimal

services:
  - docker

before_install:
  - docker build -t diditvelliz/anywhere .

deploy:
  provider: script
  script:
    - export IMAGE_NAME=diditvelliz/anywhere:$TRAVIS_TAG
    - docker build -t $IMAGE_NAME .
    - echo $DOCKER_HUB_PASSWORD | docker login -u $DOCKER_HUB_USERNAME --password-stdin
    - docker push $IMAGE_NAME
  on:
    tags: true

notifications:
  email: "diditvelliz@gmail.com"
  on_success: never
  on_failure: always