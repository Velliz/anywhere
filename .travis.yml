language: minimal

services:
  - docker

before_install:
  - docker build -t diditvelliz/anywhere .

deploy:
  provider: script
  script:
    - export IMAGE_NAME=diditvelliz/anywhere:$TRAVIS_TAG
    - docker build -t $IMAGE_NAME .
    - docker login --username $DOCKER_HUB_USERNAME --password $DOCKER_HUB_PASSWORD
    - docker push $IMAGE_NAME
  on:
    branch: master
    tags: true

notifications:
  email: "diditvelliz@gmail.com"
  on_success: never
  on_failure: always